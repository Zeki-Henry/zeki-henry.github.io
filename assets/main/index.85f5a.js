window.__require=function e(t,n,o){function a(c,i){if(!n[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!i&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=n[c]={exports:{}};t[c][0].call(u.exports,function(e){return a(t[c][1][e]||e)},u,u.exports,e,t,n,o)}return n[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<o.length;c++)a(o[c]);return a}({AudioMgr:[function(e,t,n){"use strict";cc._RF.push(t,"e47adL5nsxBH7ZNLxOk1Exc","AudioMgr");var o=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=(a.property,e("./BaseFunc")),i=e("../GManager"),s=function(){function e(){}return e.bgmVolume=1,e.sfxVolume=1,e.bgmSwitch=!0,e.sfxSwitch=!0,e.bgmAudioID=null,e.init=function(){this.bgmVolume=c.BaseFunc.load("bgmVolume",1),this.sfxVolume=c.BaseFunc.load("sfxVolume",1),cc.audioEngine.setMusicVolume(this.bgmVolume),cc.audioEngine.setEffectsVolume(this.sfxVolume),cc.game.on(cc.game.EVENT_HIDE,function(){cc.audioEngine.pauseAll(),cc.audioEngine.setVolume(this.bgmAudioID,0)}.bind(this)),cc.game.on(cc.game.EVENT_SHOW,function(){cc.audioEngine.resumeAll(),cc.audioEngine.setVolume(this.bgmAudioID,this.bgmVolume)}.bind(this))},e.playBGM=function(e,t){void 0===t&&(t=!0),null!=this.bgmAudioID&&cc.audioEngine.stop(this.bgmAudioID),i.GManager.loadAudio(e,function(e){this.bgmAudioID=cc.audioEngine.playMusic(e,t)}.bind(this))},e.stopBGM=function(){null!=this.bgmAudioID&&cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=null},e.playSFX=function(e){this.sfxVolume>0&&i.GManager.loadAudio(e,function(e){cc.audioEngine.playEffect(e,!1)}.bind(this))},e.getSFXVolume=function(){return this.sfxVolume},e.setSFXVolume=function(e){this.sfxSwitch?(c.BaseFunc.save("sfxVolume",e),this.sfxVolume=e,cc.audioEngine.setEffectsVolume(this.sfxVolume)):cc.audioEngine.setEffectsVolume(0)},e.getBGMVolume=function(){return this.bgmVolume},e.setBGMVolume=function(e){cc.log("setBGMVolume v",e),cc.log("setBGMVolume AudioMgr.bgmSwitch",this.bgmSwitch),null!=this.bgmAudioID&&(e>0?cc.audioEngine.resumeMusic():cc.audioEngine.pauseMusic()),this.bgmSwitch?(c.BaseFunc.save("bgmVolume",e),this.bgmVolume=e,cc.audioEngine.setMusicVolume(e)):cc.audioEngine.setMusicVolume(0)},e.pauseAll=function(){cc.audioEngine.pauseAll()},e.resumeAll=function(){cc.audioEngine.resumeAll()},o([r],e)}();n.default=s,cc._RF.pop()},{"../GManager":"GManager","./BaseFunc":"BaseFunc"}],BaseFunc:[function(e,t,n){"use strict";cc._RF.push(t,"fada3w0GTtJ7L5RMlUyx6yc","BaseFunc"),Object.defineProperty(n,"__esModule",{value:!0}),n.BaseFunc=n.NODE_TYPE=void 0;var o=e("../GManager"),a=null,r=["BackgroundNode","MainNode","MenuNode","PopNode","FlushNode"];(function(e){e[e.BACKGROUND_NODE=0]="BACKGROUND_NODE",e[e.MAIN_NODE=1]="MAIN_NODE",e[e.MENU_NODE=2]="MENU_NODE",e[e.POP_NODE=3]="POP_NODE",e[e.FLUSH_NODE=4]="FLUSH_NODE"})(n.NODE_TYPE||(n.NODE_TYPE={})),function(e){function t(){var e=window.location.search,t={};if(-1!=e.indexOf("?"))for(var n=e.substr(1).split("&"),o=0;o<n.length;o++){var a=n[o].split("=");t[a[0]]=decodeURIComponent(a[1])}return t}e.checkNetwork=function(e,t){if(void 0===t&&(t=!1),console.log("[checkNetwork]"),!t&&cc.sys.getNetworkType()!=cc.sys.NetworkType.NONE)return console.log("[checkNetwork] handler"),void(e&&e())},e.serverDate=function(){return new Date(Date.now()+0)},e.serverUnixTime=function(){return Math.round(Date.now()/1e3)+0},e.parseSearch=t,e.parseSearchByName=function(e){return t()[e]||!1},e.encrypt=function(e){if(null!=e){for(var t=String.fromCharCode(e.charCodeAt(0)+e.length),n=1;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)+e.charCodeAt(n-1));return escape(t)}},e.decrypt=function(e){e=unescape(e);for(var t=String.fromCharCode(e.charCodeAt(0)-e.length),n=1;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)-t.charCodeAt(n-1));return t},e.versionCompare=function(e,t){for(var n=e.split("."),o=t.split("."),a=0;a<n.length;++a){var r=parseInt(n[a]),c=parseInt(o[a]||"0");if(r!==c)return r-c}return o.length>n.length?-1:0},e.callStaticMethod=function(e,t,n,o){void 0===o&&(o=[])},e.IsJSON=function(e){if("string"==typeof e)try{var t=JSON.parse(e);return!("object"!=typeof t||!t)}catch(n){return!1}return!1},e.checkUpdate=function(){var e=o.GManager.commonData.versionupdate;return!(o.GManager.pluginMgr.getVersionCode()>=e.vn)},e.save=function(t,n){var o=JSON.stringify(n);o=e.encrypt(o),cc.sys.localStorage.setItem(t,o)},e.load=function(t,n){void 0===n&&(n=null);var o=cc.sys.localStorage.getItem(t);return null!=o&&0<o.length&&" "!=o?(o=e.decrypt(o),JSON.parse(o)):void 0===n?null:n},e.saveKeyWithDate=function(e){var t=new Date,n=""+t.getFullYear()+t.getMonth()+t.getDate();this.save(e,n)},e.loadKeyWithDate=function(e){var t=new Date,n=""+t.getFullYear()+t.getMonth()+t.getDate();return this.load(e)==n},e.mainCanvas=function(){return cc.director.getScene().getChildByName("Canvas")},e.createNode=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n=new cc.Node;return n.name=e||"",t||(t=cc.director.getScene().getChildByName("Canvas")),t.addChild(n),n},e.getWorkNode=function(t){null==a&&(a=cc.Canvas.instance.node);var n=a.getChildByName(r[t]);return null===n&&((n=e.createNode(r[t])).zIndex=10+t,n.setContentSize(a.getContentSize())),n},e.regEventHandler=function(e){for(var t=Reflect.getPrototypeOf(e),n=0,a=Object.keys(t);n<a.length;n++){var r=a[n];if(-1!==r.indexOf("_handler")&&"function"==typeof t[r]){var c=r.substring(0,r.length-8);o.GManager.addEvtListener(c,t[r],e.uuid)}}},e.removeEventHandler=function(e){o.GManager.removeEvtListenerByUuid(e.uuid)},e.SetSpriteImage=function(e,t,n){void 0===n&&(n=!1);var a=function(t){if(null!==t){var a=null;if(e instanceof cc.Sprite&&null!==e.node?a=e:e instanceof cc.Node&&null==(a=e.getComponent(cc.Sprite))&&(a=e.addComponent(cc.Sprite)),a||a.node||a.node.isValid){var r;r=n?a.node.getContentSize():t.getOriginalSize(),a.spriteFrame=t;var c=a.node.getContentSize();a.node.setScale(r.width/c.width,r.height/c.height)}else o.GManager.log2("SetSpriteImage sprite is null!")}else o.GManager.log2("SetSpriteImage image is null!")};t instanceof cc.SpriteFrame?a(t):o.GManager.loadImage(t,function(e){a(e)})},e.AddButtonEvent=function(e,t,n,a){if(e instanceof cc.Node&&null===(e=e.getComponent(cc.Button)||e.getComponent(cc.Toggle)))o.GManager.log("AddButtonEvent btn component is null!");else{e.clickEvents=e.clickEvents||[];var r=new cc.Component.EventHandler;r.target=t,r.component=n,r.handler=a,e.clickEvents.push(r)}},e.IsHttpSrc=function(e){return-1!==e.indexOf("http://")||-1!==e.indexOf("https://")},e.InstantiatePrefab=function(t,n){cc.loader.loadRes(t,function(t,o){var a=cc.instantiate(o);null!=a.getComponent("BaseScene")&&e.BindChild(a,a.getComponent("BaseScene").rootNode),n(a)})},e.BindChild=function(e,t){if(null!=e){for(var n in e._components){var o=/(.)+?(?=\<)/g.exec(e._components[n].name),a=/[^\<\)]+(?=\>)/g.exec(e._components[n].name);null!=o&&null!=a?(void 0===t[""+o[0]]&&(t[""+o[0]]={}),t[""+o[0]]["$"+a[0]]=e._components[n]):t[""+e._components[n].name]=e._components[n]}for(var r in e.children)t[""+e.children[r].name]=e.children[r],this.BindChild(e.children[r],t,"")}},e.getExitBoxString=function(e){return e instanceof cc.Node&&(e=e.getComponent(cc.EditBox)),null===e?"":e.string},e.setExitBoxString=function(e,t){e instanceof cc.Node&&(e=e.getComponent(cc.EditBox)),null!==e&&(e.string=t)},e.getLabelString=function(e){return e instanceof cc.Node&&(e=e.getComponent(cc.Label)),null===e?"":e.string},e.setLabelString=function(e,t){e instanceof cc.Node&&(e=e.getComponent(cc.Label)),null!==e&&(e.string=t)},e.Random=function(e,t){return void 0===e?0:(void 0===t&&(t=e,e=0),Math.floor(Math.random()*(t-e)+e))},e.CleanCopy=function(e){return void 0===e||"object"!=typeof e?[]:Array.isArray(e)?e.slice(0):JSON.parse(JSON.stringify(e))},e.IsWindows=function(){return cc.sys.os==cc.sys.OS_WINDOWS},e.IsAndroid=function(){return cc.sys.os==cc.sys.OS_ANDROID},e.IsIos=function(){return cc.sys.os==cc.sys.OS_IOS},e.IsLongScreen=function(){var e=cc.winSize;return e.width/e.height>1.875},e.IsShortScreen=function(){var e=cc.winSize;return e.width/e.height<1.334},e.toUpperCaseEachWord=function(e){return e.toLowerCase().replace(/( |^)[a-z]/g,function(e){return e.toUpperCase()})},e.shuffle=function(e){for(var t,n=e.length-1;n>0;n--){var o=Math.floor(Math.random()*(n+1));t=[e[o],e[n]],e[n]=t[0],e[o]=t[1]}return e},e.playAD=function(e,t){void 0===e&&(e=0),void 0===t&&(t=null),t&&t()}}(n.BaseFunc||(n.BaseFunc={})),cc._RF.pop()},{"../GManager":"GManager"}],BaseScene:[function(e,t,n){"use strict";cc._RF.push(t,"09236/6o8tONpJusxwjsUgb","BaseScene");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../base/BaseFunc"),i=e("./SceneManager"),s=e("../GManager"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sceneName="",t.initParams=null,t.maskClose=!0,t._boundingBoxSize=cc.rect(0,0,0,0),t.rootNode={},t}return a(t,e),t.prototype.__preload=function(){console.log("__preload"),c.BaseFunc.BindChild(this.node,this.rootNode),c.BaseFunc.IsLongScreen()?this.onFixLongScreen():c.BaseFunc.IsShortScreen()&&this.onFixShortScreen(),this.bindButton(),this.preloadAfter()},t.prototype.preloadAfter=function(){},t.prototype.bindButton=function(){},t.prototype.onLoad=function(){},t.prototype.start=function(){var e=this.node.getChildByName("nodePop");if(null!==e){var t=e.getContentSize(),n=this.node.convertToWorldSpaceAR(e.getPosition());this._boundingBoxSize=cc.rect(n.x-t.width*e.anchorX,n.y-t.height*e.anchorY,t.width,t.height)}},t.prototype.onOpenScene=function(){},t.prototype.onCloseScene=function(){},t.prototype.closeCallBack=function(){this.initParams&&"function"==typeof this.initParams.closeCallback&&this.initParams.closeCallback()},t.prototype.onFixLongScreen=function(){},t.prototype.onFixShortScreen=function(){},t.prototype.closeSelf=function(){i.SceneManager.closeScene(this)},t.prototype.addEvtListener=function(e,t){s.GManager.addEvtListener(e,t,this.uuid)},t.prototype.bindButtonEvent=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];"string"==typeof e&&(e=cc.find(e,this.node));var a=this.name,r=a.substring(0,a.indexOf("<")),i=a.substring(a.indexOf("<")+1,a.length-1);a=r+"."+i;var s=[],l=[];if(n&&n.length>0&&(s=n.filter(function(e){return"function"==typeof e}),l=n.filter(function(e){return"string"==typeof e})),"function"==typeof t?s.push(t):"string"==typeof t&&l.push(t),s.length>0&&(this["onClick"+e.uuid]=function(e,t){for(var n=0,o=s;n<o.length;n++)(0,o[n])(e,t)},c.BaseFunc.AddButtonEvent(e,this.node,a,"onClick"+e.uuid)),l.length>0)for(var u=0,p=l;u<p.length;u++){var f=p[u];c.BaseFunc.AddButtonEvent(e,this.node,a,f)}},t.prototype.getProgress=function(e){if("string"==typeof e&&(e=cc.find(e,this.node)),e instanceof cc.Node&&(e=e.getComponent(cc.ProgressBar)),null!==e)return e.progress},t.prototype.setProgress=function(e,t){"string"==typeof e&&(e=cc.find(e,this.node)),e instanceof cc.Node&&(e=e.getComponent(cc.ProgressBar)),null!==e&&(e.progress=t)},t.prototype.setActive=function(e,t){"string"==typeof e&&(e=cc.find(e,this.node)),null!==e&&(e.active=t)},t.prototype.SetSpriteImage=function(e,t,n){void 0===n&&(n=!1),"string"==typeof e&&(e=cc.find(e,this.node)),c.BaseFunc.SetSpriteImage(e,t,n)},t.prototype.getEditBoxString=function(e){return"string"==typeof e&&(e=cc.find(e,this.node)),c.BaseFunc.getExitBoxString(e)},t.prototype.setEditBoxString=function(e,t){"string"==typeof e&&(e=cc.find(e,this.node)),c.BaseFunc.setExitBoxString(e,t)},t.prototype.getLabelString=function(e){return"string"==typeof e&&(e=cc.find(e,this.node)),c.BaseFunc.getLabelString(e)},t.prototype.setLabelString=function(e,t){"string"==typeof e&&(e=cc.find(e,this.node)),c.BaseFunc.setLabelString(e,t)},t.prototype.checkPopCollision=function(e){return e.x>this._boundingBoxSize.x&&e.x<this._boundingBoxSize.x+this._boundingBoxSize.width&&e.y>this._boundingBoxSize.y&&e.y<this._boundingBoxSize.y+this._boundingBoxSize.height},r([u],t)}(cc.Component));n.default=p,cc._RF.pop()},{"../GManager":"GManager","../base/BaseFunc":"BaseFunc","./SceneManager":"SceneManager"}],ConsoleScene:[function(e,t,n){"use strict";cc._RF.push(t,"f9cd53c2dlHbpWcSu9oRLfW","ConsoleScene");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=e("./BaseScene"),i=e("../GManager"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._labelMsg=null,t._msgs=[],t}return a(t,e),t.prototype.onOpenScene=function(){i.GManager.addEvtListener("LOG_INFO",this.updateLogInfo.bind(this)),this._labelMsg=cc.find("nodeLog/labelmsg",this.node).getComponent(cc.Label),this.node.zIndex=100},t.prototype.updateLogInfo=function(e){this._msgs.length>20&&this._msgs.shift(),this._labelMsg.string="",this._msgs.push(e);for(var t=0,n=this._msgs;t<n.length;t++){var o=n[t];this._labelMsg.string+=o+"\n"}},r([l],t)}(c.default));n.default=u,cc._RF.pop()},{"../GManager":"GManager","./BaseScene":"BaseScene"}],EventManager:[function(e,t,n){"use strict";cc._RF.push(t,"66d5cnQ5ZlK3aDPplXb7dIO","EventManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.handler=n.EventManager=void 0;var o=e("../GManager");(function(e){var t={},n={};function o(e,n){void 0===n&&(n=null),e&&n&&t[e]&&("function"==typeof n?t[e]=t[e].filter(function(e){return e.callback!==n}):"string"==typeof n&&(t[e]=t[e].filter(function(e){return e.uuid!==n})))}e.addEventListener=function(e,o,a){if(void 0===a&&(a=""),e&&o){var r={};r.callback=o,r.uuid=a,void 0!==t[e]&&null!==t[e]||(t[e]=[]),t[e].push(r),a.length>0&&(null!==n[a]&&void 0!==n[a]||(n[a]=[]),n[a].push(e))}},e.removeEventListener=o,e.removeEventListenerByUUID=function(e){void 0===e&&(e=""),0!=e.length&&null!==n[e]&&void 0!==n[e]&&(n[e].map(function(t){return o(t,e)}),delete n[e])},e.dispatchEvent=function(e,n){if(void 0===n&&(n=null),e){var o="";"string"==typeof e?o=e:e.opcode&&"string"==typeof e.opcode&&(o=e.opcode,n=e.data),t[o]&&t[o].map(function(e){return e.callback(n)})}}})(n.EventManager||(n.EventManager={})),n.handler=function(e){return void 0===e&&(e=null),function(t,n,a){return o.GManager.addEvtListener(e||n,a.value,t.uuid)}},cc._RF.pop()},{"../GManager":"GManager"}],GManager:[function(e,t,n){"use strict";cc._RF.push(t,"172ffGGFo9N3I1yQNsulhF1","GManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.GManager=void 0;var o=e("./base/LogManager"),a=e("./base/EventManager"),r=e("./base/ResManager"),c=e("./base/SceneManager"),i=e("./base/BaseFunc");(function(e){e.isTesting=i.BaseFunc.parseSearchByName("isTesting"),e.pluginWrapper=null,e.isLog=!0,e.log=o.LogManager.log.bind(o.LogManager),e.log2=o.LogManager.log2.bind(o.LogManager),e.info=o.LogManager.info.bind(o.LogManager),e.info2=o.LogManager.info2.bind(o.LogManager),e.info3=o.LogManager.info3.bind(o.LogManager),e.warn=o.LogManager.warn.bind(o.LogManager),e.error=o.LogManager.error.bind(o.LogManager),e.addEvtListener=a.EventManager.addEventListener,e.removeEvtListener=a.EventManager.removeEventListener,e.removeEvtListenerByUuid=a.EventManager.removeEventListenerByUUID,e.dispatchEvent=a.EventManager.dispatchEvent,e.loadPrefab=r.ResManager.loadPrefab,e.loadImage=r.ResManager.loadImage,e.loadImages=r.ResManager.loadImages,e.loadAudio=r.ResManager.loadAudio,e.loadAudios=r.ResManager.loadAudios,e.commonData=[],e.gameConfig={},e.BACKGROUND_NODE=i.NODE_TYPE.BACKGROUND_NODE,e.MAIN_NODE=i.NODE_TYPE.MAIN_NODE,e.MENU_NODE=i.NODE_TYPE.MENU_NODE,e.POP_NODE=i.NODE_TYPE.POP_NODE,e.FLUSH_NODE=i.NODE_TYPE.FLUSH_NODE,e.popScene=c.SceneManager.popScene,e.closeScene=c.SceneManager.closeScene})(n.GManager||(n.GManager={})),cc._RF.pop()},{"./base/BaseFunc":"BaseFunc","./base/EventManager":"EventManager","./base/LogManager":"LogManager","./base/ResManager":"ResManager","./base/SceneManager":"SceneManager"}],GameConfig:[function(e,t,n){"use strict";cc._RF.push(t,"8d5f9y9Mb9HHIBXr2qaj4Nx","GameConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.PLUGIN_ENV=void 0;var o,a,r=e("./framework/GManager");(function(e){e[e.ENV_OFFICIAL=0]="ENV_OFFICIAL",e[e.ENV_TEST=1]="ENV_TEST",e[e.ENV_MIRROR=2]="ENV_MIRROR"})(o=n.PLUGIN_ENV||(n.PLUGIN_ENV={})),function(e){var t;e.CurENV=o.ENV_OFFICIAL,e.version="1.0.0.1",e.packageName="5",e.gameId=1e3,e.wechat="WECHAT\u2014NAME",e.domainSuffix="XXX.com",e.isHttps=!1;var n=((t={})[o.ENV_TEST]={pluginEvn:o.ENV_TEST,webURL:"http://t_front."+e.domainSuffix+"/"},t[o.ENV_MIRROR]={pluginEvn:o.ENV_MIRROR,webURL:"http://m_front."+e.domainSuffix+"/"},t[o.ENV_OFFICIAL]={pluginEvn:o.ENV_OFFICIAL,webURL:"http://front."+e.domainSuffix+"/"},t),a={LOADING_CONFIGS:{http:"webURL",path:"get/loading/configs"}};e.getEvnConfig=function(){return n[e.CurENV]},e.getUrl=function(t){if(a[t]){var o=a[t].http;return n[e.CurENV][o]+a[t].path}}}(a||(a={})),r.GManager.gameConfig=a,cc._RF.pop()},{"./framework/GManager":"GManager"}],GameManager:[function(e,t,n){"use strict";cc._RF.push(t,"2c8f0/LhfJGa7VHr5QAG2kv","GameManager");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../GManager"),i=e("../base/BaseFunc"),s=e("../base/AudioMgr"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.start=function(){s.default.init(),this.initConfig()},t.prototype.initConfig=function(){this.getOnlineConfig(null)},t.prototype.getOnlineConfig=function(){c.GManager.popScene("moduleLobby","UpdateScene",c.GManager.MAIN_NODE,function(){i.BaseFunc.getWorkNode(c.GManager.FLUSH_NODE).removeAllChildren(!0)})},r([u],t)}(cc.Component));n.default=p,cc._RF.pop()},{"../GManager":"GManager","../base/AudioMgr":"AudioMgr","../base/BaseFunc":"BaseFunc"}],HotUpdate:[function(e,t,n){"use strict";cc._RF.push(t,"51edd1HoIBLFYo5B9uNvm2r","HotUpdate");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c,i=e("../base/BaseScene"),s=e("../GManager"),l=e("../base/BaseFunc"),u=cc._decorator,p=u.ccclass,f=u.property,d=["No use hot update!","No local manifest file found, hot update skipped.","Fail to download manifest file, hot update skipped.","Fail to parse manifest file, hot update skipped.","Asset update error.","Compression package decoding failed.","Already up to date with the latest remote version.","New version found, please try to update.","Update finished.","Update failed."];(function(e){e[e.NONE=0]="NONE",e[e.ERROR_NO_LOCAL_MANIFEST=1]="ERROR_NO_LOCAL_MANIFEST",e[e.ERROR_DOWNLOAD_MANIFEST=2]="ERROR_DOWNLOAD_MANIFEST",e[e.ERROR_PARSE_MANIFEST=3]="ERROR_PARSE_MANIFEST",e[e.ERROR_UPDATING=4]="ERROR_UPDATING",e[e.ERROR_DECOMPRESS=5]="ERROR_DECOMPRESS",e[e.ALREADY_UP_TO_DATE=6]="ALREADY_UP_TO_DATE",e[e.NEW_VERSION_FOUND=7]="NEW_VERSION_FOUND",e[e.UPDATE_FINISHED=8]="UPDATE_FINISHED",e[e.UPDATE_FAILED=9]="UPDATE_FAILED",e[e.UPDATE_PROGRESSION=10]="UPDATE_PROGRESSION"})(c||(c={}));var g=function(e,t){console.log("JS Custom Version Compare: version A is "+e+", version B is "+t);for(var n=e.split("."),o=t.split("."),a=0;a<n.length;++a){var r=parseInt(n[a]),c=parseInt(o[a]||0);if(r!==c)return r-c}return o.length>n.length?-1:0},h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.manifestUrl=null,t.state=c.NONE,t._am=null,t._storagePath="",t._tag="popstar",t._updating=!1,t._canRetry=!1,t._failCount=0,t._totalFilesCount=0,t._totalBytesCount=0,t}return a(t,e),t.prototype.onOpenScene=function(){cc.sys.isBrowser?this.showMainScene():(this.setProgress(this.rootNode.progress,0),this._storagePath=jsb.fileUtils.getWritablePath()+this._tag+"_temp",console.log("Storage path for remote asset : "+this._storagePath),this._am=new jsb.AssetsManager("",this._storagePath,g),this._am.setVerifyCallback(function(e,t){var n=t.compressed,o=t.md5,a=t.path;return t.size,n?(console.log("Verification passed : "+a),!0):(console.log("Verification passed : "+a+" ("+o+")"),!0)}),cc.sys.os===cc.sys.OS_ANDROID&&this._am.setMaxConcurrentTask(2),this.hotUpdate())},t.prototype.checkHandlers=function(e){console.log("[HotUpdate.checkHandlers]",e),e==c.ALREADY_UP_TO_DATE&&this.showMainScene()},t.prototype.updateHandlers=function(e,t,n,o,a){void 0===t&&(t=0),void 0===n&&(n=0),void 0===o&&(o=""),void 0===a&&(a=""),console.log("[HotUpdate.updateResult2]",e,t,n,o,a),""!=o&&(this.rootNode.labelProgress.$Label.string=o),e==c.ALREADY_UP_TO_DATE&&this.showMainScene()},t.prototype.checkUpdateCallback=function(e){var t;switch(cc.log("Code: "+e.getEventCode()),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.state=c.ERROR_NO_LOCAL_MANIFEST;break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:this.state=c.ERROR_DOWNLOAD_MANIFEST;break;case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.state=c.ERROR_PARSE_MANIFEST;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:this.state=c.ALREADY_UP_TO_DATE;break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:this.state=c.NEW_VERSION_FOUND;break;default:return}this._am.setEventCallback(null),this._updating=!1,t=d[this.state],cc.log("checkUpdateCallback:",t),this.checkHandlers(this.state)},t.prototype.checkUpdate=function(){if(cc.sys.isNative)if(this._updating)cc.log("Checking or updating ...");else{if(this._am.getState()===jsb.AssetsManager.State.UNINITED){var e=this.manifestUrl.nativeUrl;cc.loader.md5Pipe&&(e=cc.loader.md5Pipe.transformURL(e)),this._am.loadLocalManifest(e)}this._am.getLocalManifest()&&this._am.getLocalManifest().isLoaded()?(this._am.setEventCallback(this.checkUpdateCallback.bind(this)),this._am.checkUpdate(),this._updating=!0):cc.log("Failed to load local manifest ...")}else this.checkHandlers(this.state)},t.prototype.hotUpdate=function(){if(cc.sys.isNative){if(this._am&&!this._updating){if(this._am.setEventCallback(this.hotUpdateCallback.bind(this)),this._am.getState()===jsb.AssetsManager.State.UNINITED){var e=this.manifestUrl.nativeUrl;cc.loader.md5Pipe&&(e=cc.loader.md5Pipe.transformURL(e)),this._am.loadLocalManifest(e)}this._failCount=0,this._am.update(),this._updating=!0}}else this.updateHandlers(this.state)},t.prototype.hotUpdateCallback=function(e){var t=!1,n=!1,o=0,a=0,r="0/0",i="0/0";switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.state=c.ERROR_NO_LOCAL_MANIFEST,n=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:this.state=c.UPDATE_PROGRESSION,this._totalFilesCount=e.getTotalFiles(),this._totalBytesCount=e.getTotalBytes(),a=e.getPercentByFile(),i=e.getDownloadedFiles()+" / "+this._totalFilesCount,o=e.getPercent(),r=e.getDownloadedBytes()+" / "+this._totalBytesCount;e.getMessage();this.setProgress(this.rootNode.progress,e.getPercent());break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:this.state=c.ERROR_DOWNLOAD_MANIFEST;break;case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.state=c.ERROR_PARSE_MANIFEST,n=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:this.state=c.ALREADY_UP_TO_DATE,n=!0;break;case jsb.EventAssetsManager.UPDATE_FINISHED:this.state=c.UPDATE_FINISHED,o=1,a=1,r=this._totalBytesCount+"/"+this._totalBytesCount,i=this._totalFilesCount+"/"+this._totalFilesCount,t=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:this.state=c.UPDATE_FAILED,this._updating=!1,this._canRetry=!0;break;case jsb.EventAssetsManager.ERROR_UPDATING:this.state=c.ERROR_UPDATING,e.getAssetId(),e.getMessage(),this._failCount++;break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:this.state=c.ERROR_DECOMPRESS,e.getMessage()}if(n&&(this._am.setEventCallback(null),this._updating=!1),t){this._am.setEventCallback(null);var s=jsb.fileUtils.getSearchPaths(),l=this._am.getLocalManifest().getSearchPaths();return console.log("new search path:",JSON.stringify(l)),Array.prototype.unshift.apply(s,l),cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(s)),jsb.fileUtils.setSearchPaths(s),cc.audioEngine.stopAll(),console.log("[HotUpdate.updateCallback] restart 1"),cc.game.restart(),console.log("[HotUpdate.updateCallback] restart 2"),void cc.log("hotupdate done!")}this.updateHandlers(this.state,o,a,r,i)},t.prototype.showMainScene=function(){this.closeSelf(),this.setProgress(this.rootNode.progress,0),s.GManager.popScene("moduleLobby","ModuleStart",s.GManager.MAIN_NODE,function(){console.log("BaseFunc.getWorkNode(GManager.FLUSH_NODE).removeAllChildren(true)"),l.BaseFunc.getWorkNode(s.GManager.FLUSH_NODE).removeAllChildren(!0),console.log("BaseFunc.getWorkNode(GManager.FLUSH_NODE).removeAllChildren(true) 1")})},t.prototype.onDestroy=function(){},t.State=c,r([f({type:cc.Asset,tooltip:"\u5f53\u524d\u7248\u672c\u8d44\u6e90\u8bb0\u5f55\u7684manifest\u6587\u4ef6"})],t.prototype,"manifestUrl",void 0),r([p],t)}(i.default);n.default=h,cc._RF.pop()},{"../GManager":"GManager","../base/BaseFunc":"BaseFunc","../base/BaseScene":"BaseScene"}],LoadingScene:[function(e,t,n){"use strict";cc._RF.push(t,"e94d2C5nWpGl6B8NydRrKWQ","LoadingScene");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../base/BaseScene"),i=e("../GManager"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._curProgress=0,t._updateProgress=0,t}return a(t,e),t.prototype.onOpenScene=function(){i.GManager.addEvtListener("UPDATE_LOADING_PROGRESS",this.updateProgress.bind(this)),this._curProgress=0},t.prototype.updateProgress=function(e){this._updateProgress=e.value},t.prototype.update=function(e){this._curProgress>=1||(this._curProgress+=Math.min(e,this._updateProgress-this._curProgress),this.setProgress("progress",this._curProgress),this._curProgress>=1&&i.GManager.dispatchEvent("UPDATE_LOADING_FINISH"))},r([l],t)}(c.default));n.default=u,cc._RF.pop()},{"../GManager":"GManager","../base/BaseScene":"BaseScene"}],"LobbyScene.lobby":[function(e,t,n){"use strict";cc._RF.push(t,"51b3aGbTphLS7Vb8F5LFUtq","LobbyScene.lobby");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../framework/base/BaseScene"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onOpenScene=function(){console.log("LobbyScene onOpenScene"),this.initMenus(),this.initGames(),this.regModel(),console.log("LobbyScene onOpenScene end")},t.prototype.update=function(){},t.prototype.initMenus=function(){console.log("LobbyScene initMenus")},t.prototype.initGames=function(){},t.prototype.regModel=function(){},t.prototype.onCloseScene=function(){},r([s],t)}(c.default));n.default=l,cc._RF.pop()},{"../framework/base/BaseScene":"BaseScene"}],LogManager:[function(e,t,n){"use strict";cc._RF.push(t,"e789cRjc9ZBY47UfL2QQ4F4","LogManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.LogManager=void 0;var o=e("../GManager");(function(e){function t(e){void 0===e&&(e=3);var t=(new Error).stack.split("\n");t.shift();var n=[];t.forEach(function(e){e=e.substring(7),n.push(e)});for(var o="",a=0;0<e&&a<n.length;a++){var r=n[a].split(" ");"_stack"!==r[0]&&"eval"!==r[0]&&"Array.map"!==r[0]&&"Object.log"!==r[0]&&"Object.info"!==r[0]&&"Object.warn"!==r[0]&&"Object.error"!==r[0]&&(o+="\n at "+n[a].replace("Object.",""),e--)}return o}function n(){var e=new Date,t=e.getHours()+"",n="";return n+=(1===t.length?"0"+t:t)+":",n+=(1===(t=e.getMinutes()+"").length?"0"+t:t)+":",n+=(1===(t=e.getSeconds()+"").length?"0"+t:t)+".",1===(t=e.getMilliseconds()+"").length&&(t="00"+t),2===t.length&&(t="0"+t),"["+(n+=t)+"]"}e.log=function(){if(o.GManager.isLog){var a=cc.log||console.log||window.log;1==arguments.length&&"object"==typeof arguments[0]?a.call(e,"%s",n(),arguments[0],t(1)):a.call(e,"%s %s",n(),cc.js.formatStr.apply(cc,arguments),t(1))}},e.log2=function(){if(o.GManager.isLog){var a=cc.log||console.log||window.log;1==arguments.length&&"object"==typeof arguments[0]?a.call(e,"%c%s","color:#EED2EE;",n(),arguments[0],t(1)):a.call(e,"%c%s %s %s","color:#EED2EE;",n(),cc.js.formatStr.apply(cc,arguments),t(1))}},e.info=function(){o.GManager.isLog&&(cc.log||console.log||window.log).call(e,"%c%s %s %s","color:#00CD00;",n(),cc.js.formatStr.apply(cc,arguments),t())},e.info2=function(){o.GManager.isLog&&(cc.log||console.log||window.log).call(e,"%c%s %s %s","color:#F08080;",n(),cc.js.formatStr.apply(cc,arguments),t())},e.info3=function(){o.GManager.isLog&&(cc.log||console.log||window.log).call(e,"%c%s %s %s","color:#9B30FF;",n(),cc.js.formatStr.apply(cc,arguments),t())},e.warn=function(){o.GManager.isLog&&(cc.log||console.log||window.log).call(e,"%c%s %s %s","color:#ee7700;",n(),cc.js.formatStr.apply(cc,arguments),t())},e.error=function(){o.GManager.isLog&&(cc.log||console.log||window.log).call(e,"%c%s %s %s","color:red",n(),cc.js.formatStr.apply(cc,arguments),t(5))}})(n.LogManager||(n.LogManager={})),cc._RF.pop()},{"../GManager":"GManager"}],"ModuleStart.lobby":[function(e,t,n){"use strict";cc._RF.push(t,"5169adS9tVAIpPxk4L3ANa5","ModuleStart.lobby");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../framework/GManager"),i=e("../framework/base/PreLoad"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._images=[],t._audios=[],t}return a(t,e),t.prototype.onOpenScene=function(){e.prototype.onOpenScene.call(this)},t.prototype.onLoadFinish=function(){var e=this;console.log("moduleStart.lobby onLoadFinish",this.uuid),c.GManager.popScene("moduleLobby","LobbyScene",c.GManager.MAIN_NODE,function(){e.closeLoadingScene(),c.GManager.closeScene("ModuleStart")})},t.prototype.onEnable=function(){console.log("moduleStart onEnable")},t.prototype.onDisable=function(){console.log("moduleStart onDisable")},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),console.log("moduleStart onLoad")},r([l],t)}(i.default));n.default=u,cc._RF.pop()},{"../framework/GManager":"GManager","../framework/base/PreLoad":"PreLoad"}],PreLoad:[function(e,t,n){"use strict";cc._RF.push(t,"96ab8i0BiJMB4B8u36qhkQq","PreLoad");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=e("./BaseScene"),i=e("../GManager"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._images=[],t._audios=[],t._count=0,t._value=0,t}return a(t,e),t.prototype.onOpenScene=function(){i.GManager.popScene("moduleBase","LoadingScene",i.GManager.FLUSH_NODE,this.preload.bind(this)),i.GManager.addEvtListener("UPDATE_LOADING_FINISH",this.onLoadFinish.bind(this),this.uuid)},t.prototype.preload=function(){this._count=this._images.length+this._audios.length,this._count>0?this.scheduleOnce(this.loadRes.bind(this),.1):this.scheduleOnce(i.GManager.dispatchEvent.bind(this,"UPDATE_LOADING_PROGRESS",{value:1}),.1)},t.prototype.loadRes=function(){var e=this,t=null,n=null;this._images.length>0?(t=this._images.shift(),n=i.GManager.loadImages):this._audios.length>0&&(t=this._audios.shift(),n=i.GManager.loadAudios),null!==t&&n(t,function(t){if(null!==t){var n=e._value;null!==t.progress&&void 0!==t.progress?n+=1*t.progress/e._count:(n=1/e._count,e._value+=n,e.scheduleOnce(e.loadRes.bind(e),.1)),i.GManager.dispatchEvent("UPDATE_LOADING_PROGRESS",{value:e._value})}})},t.prototype.onLoadFinish=function(){},t.prototype.closeLoadingScene=function(){i.GManager.closeScene("LoadingScene")},r([l],t)}(c.default));n.default=u,cc._RF.pop()},{"../GManager":"GManager","./BaseScene":"BaseScene"}],ResManager:[function(e,t,n){"use strict";cc._RF.push(t,"d7313NnxFJM46Zx4Tcb2e5B","ResManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.ResManager=void 0;var o=e("../GManager"),a=e("./BaseFunc"),r={},c={};(function(e){function t(e,t,n){void 0===n&&(n=null),null!=e?cc.loader.loadRes(e,t,function(a,r){if(a)o.GManager.error("Load asset err: ",a);else{var i=null;t==cc.Prefab?i=cc.instantiate(r):t===cc.SpriteFrame?(l(e.substring(0,e.lastIndexOf("/")),e.substring(e.lastIndexOf("/")+1,e.length),r),i=r):t===cc.AudioClip?(c[e]=r,i=r):i=r,n&&"function"==typeof n&&n(i)}}):o.GManager.warn("UILoader loadRes path is null")}function n(e,t){if(void 0===t&&(t=null),null!=e){var n=e.substring(e.lastIndexOf(".")+1,e.length);cc.loader.load({url:e,type:n},function(a,r){if(a)o.GManager.error("Load asset err: ",a);else{var i=null;"png"===n||"jpg"===n?(l(e.substring(0,e.lastIndexOf("/")),e.substring(e.lastIndexOf("/")+1,e.length),r=new cc.SpriteFrame(r)),i=r):"mp3"===n?(c[e]=r,i=r):i=r,t&&"function"==typeof t&&t(i)}})}else o.GManager.warn("UILoader loadRes path is null")}function i(e,t,n){void 0===n&&(n=null),null!=e?cc.loader.loadResDir(e,t,function(e,t){n&&"function"==typeof n&&n({progress:e/t})},function(a,r){if(a)o.GManager.error("Load asset err: ",a);else{var i=null;t==cc.Prefab?i=r.map(function(e){return cc.instantiate(e)}):t===cc.SpriteFrame?(r.map(function(t){return l(e,t.name,t)}),i=r):t===cc.AudioClip?(r.map(function(e){return c[e.name]=e}),i=r):i=r,n&&"function"==typeof n&&n(i)}}):o.GManager.warn("UILoader loadRes path is null")}function s(e,t,n){void 0===n&&(n=null),null!=e&&"object"==typeof e&&0!=e.length?cc.loader.loadResArray(e,t,function(e,t){n&&"function"==typeof n&&n({progress:e/t})},function(a,r){if(a)o.GManager.error("Load asset err: ",a);else{var i=null;t==cc.Prefab?i=r.map(function(e){return cc.instantiate(e)}):t===cc.SpriteFrame?(r.map(function(t){return l(e,t.name,t)}),i=r):t===cc.AudioClip?(r.map(function(e){return c[e.name]=e}),i=r):i=r,n&&"function"==typeof n&&n(i)}}):o.GManager.warn("UILoader loadResArray path is null or path length is 0")}function l(e,t,n){null!==r[e]&&void 0!==r[e]||(r[e]={}),null!==r[e][t]&&void 0!==r[e][t]||(r[e][t]=n)}e.loadPrefab=function(e,n){t(e,cc.Prefab,n)},e.loadImage=function(e,o){var c=e.substring(0,e.lastIndexOf("/")),i=e.substring(e.lastIndexOf("/")+1,e.length);r[c]&&r[c][i]?o&&"function"==typeof o&&o(r[c][i]):a.BaseFunc.IsHttpSrc(e)?n(e,o):t(e,cc.SpriteFrame,o)},e.loadImages=function(e,t){"string"==typeof e?i(e,cc.SpriteFrame,t):s(e,cc.SpriteFrame,t)},e.loadAudio=function(e,o){c[e]?o&&"function"==typeof o&&o(c[e]):a.BaseFunc.IsHttpSrc(e)?n(e,o):t(e,cc.AudioClip,o)},e.loadAudios=function(e,t){"string"==typeof e?i(e,cc.AudioClip,t):s(e,cc.AudioClip,t)}})(n.ResManager||(n.ResManager={})),cc._RF.pop()},{"../GManager":"GManager","./BaseFunc":"BaseFunc"}],SceneManager:[function(e,t,n){"use strict";cc._RF.push(t,"be6cbQYaA5LzKsyxWy4zD/Q","SceneManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.SceneManager=void 0;var o=e("./BaseScene"),a=e("../GManager"),r=e("../base/BaseFunc"),c={};(function(e){e.popScene=function(e,t,n,i,s){void 0===n&&(n=r.NODE_TYPE.POP_NODE),void 0===s&&(s=null),a.GManager.loadPrefab(e+"/prefab/"+t,function(e){if(e.position=cc.Vec3.ZERO,n===r.NODE_TYPE.POP_NODE){var t=r.BaseFunc.getWorkNode(n);if(null===t.getChildByName("MaskNode")){var l=new cc.Node("MaskNode");l.setContentSize(cc.winSize);var u=l.addComponent(cc.Sprite);u.spriteFrame=new cc.SpriteFrame;var p=new cc.Texture2D;p.initWithData(new Uint8Array([0,0,0,150]),cc.Texture2D.PixelFormat.RGBA8888,1,1),u.spriteFrame.setTexture(p),u.spriteFrame.setRect(cc.rect(0,0,20*cc.winSize.width,20*cc.winSize.width));var f=l.addComponent(cc.Button);f.transition=cc.Button.Transition.NONE;var d=l.addComponent(o.default);d.onMaskClose=function(e){var n=t.children[t.childrenCount-1].getComponent(o.default);n.maskClose&&!n.checkPopCollision(e.touch._point)&&n.closeSelf()},d.addEvtListener("CLOSE_SCENE",function(){1===t.childrenCount?l.removeFromParent(!0):l.setSiblingIndex(t.childrenCount-2)}),d.addEvtListener("POP_SCENE",function(){l.setSiblingIndex(t.childrenCount-2)}),r.BaseFunc.AddButtonEvent(f,l,"BaseScene","onMaskClose"),t.addChild(l)}}r.BaseFunc.getWorkNode(n).addChild(e),"function"==typeof i&&(s=i,i=null);var g=e.getComponent(o.default);g||(g=e.addComponent(o.default)),g.sceneName=e.name,g.initParams=i,g.scheduleOnce(g.onOpenScene.bind(g),0),r.BaseFunc.regEventHandler(g),c[e.name]=g,s&&"function"==typeof s&&s(g),a.GManager.dispatchEvent("POP_SCENE",{scene:g})})},e.closeScene=function(e,t){void 0===t&&(t=null),"string"==typeof e&&(e=c[e]),e.onCloseScene(),e.closeCallBack(),r.BaseFunc.removeEventHandler(e),t&&"function"==typeof t&&t(),delete c[e.sceneName],e.node.removeFromParent(!0),e.node.destroy(),a.GManager.dispatchEvent("CLOSE_SCENE",{scene:e})}})(n.SceneManager||(n.SceneManager={})),cc._RF.pop()},{"../GManager":"GManager","../base/BaseFunc":"BaseFunc","./BaseScene":"BaseScene"}],ballGame:[function(e,t,n){"use strict";cc._RF.push(t,"8a3189YtUpPN5doqBJEnWRd","ballGame");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=e("./framework/base/BaseScene"),i=e("./gameLogic"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bottlePrefab=null,t.ballArray=[],t}return a(t,e),t.prototype.start=function(){i.default.Instance().InitGame(this)},t.prototype.InitBall=function(e){this.ballArray=e,cc.log("InitBall",this.ballArray)},t.prototype.InitBottle=function(){cc.log("InitBottle");for(var e=0;e<3;e++){var t=cc.instantiate(this.bottlePrefab);t.x=120*(e-1),t.getComponent("bottle").setParent(this),this.rootNode.gameNode.addChild(t),i.default.Instance().bottleHandler.push(t.getComponent("bottle"));for(var n=0;n<3;n++)3*e+n<this.ballArray.length&&t.getComponent("bottle").setBall(this.ballArray[3*e+n])}},t.prototype.onOpenScene=function(){cc.log("onOpenScene")},r([u(cc.Prefab)],t.prototype,"bottlePrefab",void 0),r([l],t)}(c.default);n.default=p,cc._RF.pop()},{"./framework/base/BaseScene":"BaseScene","./gameLogic":"gameLogic"}],ball:[function(e,t,n){"use strict";cc._RF.push(t,"47fa8hI5I9EQKtu2M5nIh3w","ball");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=e("./framework/base/BaseScene"),i=e("./gameLogic"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ballIndex=1,t.ballFrame=[],t.moveLock=!1,t.ballType=-1,t}return a(t,e),t.prototype.start=function(){},t.prototype.SetIndex=function(e){this.node.y=50*e+25},t.prototype.setType=function(e){cc.log("setType",e),this.ballType=e,this.rootNode.ball.$Sprite.spriteFrame=this.ballFrame[e]},t.prototype.getType=function(){return this.ballType},t.prototype.onSelect=function(){var e=this;if(!this.moveLock){this.moveLock=!0;var t=[];t[t.length]=cc.moveTo(.2,0,280),t[t.length]=cc.callFunc(function(){e.moveLock=!1}),this.node.runAction(cc.sequence(t))}},t.prototype.moveToBottle=function(e){var t=this;if(cc.log("need move to bottle",e.node.x,e.node.y),!this.moveLock){this.moveLock=!0,i.default.Instance().changeParent(this.node,e.rootNode.bottomNode);var n=[];n[n.length]=cc.moveTo(.2,0,280),n[n.length]=cc.moveTo(.2,0,50*e.ballNodeArrayHandler.length+25),n[n.length]=cc.callFunc(function(){i.default.Instance().setGlobalBall(null),e.ballNodeArrayHandler.push(t),t.moveLock=!1,e.checkBall()}),this.node.runAction(cc.sequence(n))}},r([u(cc.Integer)],t.prototype,"ballIndex",void 0),r([u(cc.SpriteFrame)],t.prototype,"ballFrame",void 0),r([l],t)}(c.default);n.default=p,cc._RF.pop()},{"./framework/base/BaseScene":"BaseScene","./gameLogic":"gameLogic"}],bottle:[function(e,t,n){"use strict";cc._RF.push(t,"aabd88isaVCSIAc2Uv7ljf7","bottle");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(r<3?a(c):r>3?a(t,n,c):a(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=e("./framework/base/BaseScene"),i=e("./gameLogic"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.ballPrefab=null,t.ballNodeArrayHandler=[],t.parentNodeHandler=null,t}return a(t,e),t.prototype.init=function(){cc.log("Bottle start")},t.prototype.setBall=function(e){var t=cc.instantiate(this.ballPrefab);this.rootNode.bottomNode.addChild(t);var n=t.getComponent("ball");n.SetIndex(this.ballNodeArrayHandler.length),n.setType(e),this.ballNodeArrayHandler.push(n)},t.prototype.setParent=function(e){this.parentNodeHandler=e},t.prototype.onClick=function(){cc.log("onclick");var e=i.default.Instance().getGlobalBall();if(null!=e)return 4==this.ballNodeArrayHandler.length?void cc.log("full ball"):(cc.log("global is not empty"),void e.moveToBottle(this));if(0!=this.ballNodeArrayHandler.length){var t=this.ballNodeArrayHandler.pop();t.onSelect(),i.default.Instance().setGlobalBall(t)}else cc.log("have no ball")},t.prototype.checkBall=function(){if(3==this.ballNodeArrayHandler.length){for(var e=this.ballNodeArrayHandler[0],t=1;t<3;t++)if(e.getType()!=this.ballNodeArrayHandler[t].getType())return void(this.rootNode.bottleMask.active=!1);cc.log("it is ok same ball!"),this.rootNode.bottleMask.active=!0}},r([u(cc.Label)],t.prototype,"label",void 0),r([u(cc.Prefab)],t.prototype,"ballPrefab",void 0),r([l],t)}(c.default);n.default=p,cc._RF.pop()},{"./framework/base/BaseScene":"BaseScene","./gameLogic":"gameLogic"}],gameLogic:[function(e,t,n){"use strict";cc._RF.push(t,"02b8c5p6t9BhpmEnojknlGn","gameLogic");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("./framework/base/BaseFunc"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.globalBall=null,t.bottleHandler=[],t.gameScene=null,t.ballArray=[],t}return a(t,e),t.Instance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.InitGame=function(e){t.Instance().gameScene=e,t.Instance().InitBall(),t.Instance().gameScene.InitBall(t.Instance().ballArray),t.Instance().gameScene.InitBottle()},t.prototype.InitBall=function(){var e=[0,1,2];r.BaseFunc.shuffle(e),[3,3,3].forEach(function(n,o){for(var a=0;a<n;a++)t.Instance().ballArray.push(e[o])}),r.BaseFunc.shuffle(t.Instance().ballArray),cc.log("GameLogic.Instance().ballArray",t.Instance().ballArray)},t.prototype.changeParent=function(e,t){if(e.parent!=t){var n=e.convertToWorldSpaceAR(cc.v2(0,0)),o=t.convertToNodeSpaceAR(n);e.parent=t,e.position=o}},t.prototype.setGlobalBall=function(e){this.globalBall=e},t.prototype.getGlobalBall=function(){return this.globalBall},t}(e("./framework/base/BaseScene").default);n.default=c,cc._RF.pop()},{"./framework/base/BaseFunc":"BaseFunc","./framework/base/BaseScene":"BaseScene"}]},{},["GameConfig","ball","ballGame","bottle","GManager","AudioMgr","BaseFunc","BaseScene","ConsoleScene","EventManager","LoadingScene","LogManager","PreLoad","ResManager","SceneManager","GameManager","HotUpdate","gameLogic","LobbyScene.lobby","ModuleStart.lobby"]);